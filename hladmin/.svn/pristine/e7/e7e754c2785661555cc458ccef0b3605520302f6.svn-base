<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>控制台页面</title>

    <link rel="stylesheet" href="css/style.default.css" type="text/css"/>
    <link rel="stylesheet" href="layer/theme/default/layer.css?v=3.1.1" type="text/css" id="layuicss-layer"/>
    <script type="text/javascript" src="js/plugins/jquery-1.7.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script type="text/javascript" src="layer/layer.js"></script>

    <!--[if lte IE 8]>
    <script language="javascript" type="text/javascript" src="js/plugins/excanvas.min.js"></script><![endif]-->
    <!--[if IE 9]>
    <link rel="stylesheet" media="screen" href="css/style.ie9.css"/>
    <![endif]-->
    <!--[if IE 8]>
    <link rel="stylesheet" media="screen" href="css/style.ie8.css"/>
    <![endif]-->
    <!--[if lt IE 9]>
    <script src="js/plugins/css3-mediaqueries.js"></script>
    <![endif]-->
</head>
<body>

<div class="pageheader">
    <ul class="breadcrumbs">
        <li><a href="">内容</a></li>
        <li><a href="">内容相关设置</a></li>
        <li><a href="">管理栏目</a></li>
    </ul>
</div><!--pageheader-->

<div id="contentwrapper" class="contentwrapper">
    <div style="margin-bottom: 5px">
        <input type="button" value="模型管理" class="stdbtn btn_black"
               onclick="changUrl('/ManagerProgramList');">
    </div>
    <form th:if="${type} eq 'add'" class="stdform stdform2" action="/insertCategory" method="post" id="forms">
        <p>
            <label>添加方式:</label>
            <span class="field" >
                <input name="Fruit" type="radio" value="" />单条添加
                <input name="Fruit" type="radio" value="" />批量添加
            </span>
        </p>
        <p>
            <label>上级栏目：</label>
            <span class="field" >
             <select th:if="${type} eq 'add'" name="parentid" id="parentid" style="width:500px;padding: 8px;">
                 <option th:each="c:${categorylist}" th:value="${c.catid} " th:text="${c.name} "></option>
             </select>
            </span>
        </p>
        <p>
            <label>栏目名称：</label>
            <span class="field">
                <input th:if="${type} eq 'add'"  type="text" name="catname"  class="mediuminput langmu"/>
            </span>
        </p>
        <p>
            <label>英文目录：</label>
            <span class="field">
                <input th:if="${type} eq 'add'"  type="text" name="catdir" class="mediuminput mulu"/>
            </span>
        </p>
        <p>
            <label>栏目图片：</label>
            <span class="field">
                <input th:if="${type} eq 'add'" id="image"type="text" name="image" class="mediuminput"/>
            </span>
        </p>
        <p>
            <label>栏目位置Code</label>
            <span class="field" id="catlocation"></span>
        </p>
        <p>
            <label>描述：</label>
            <span class="field">
               <textarea name="description" maxlength="255" id="description" style="width: 134px; height: 48px; margin: 0px;"></textarea>
            </span>
        </p>

        <p class="stdformbutton">
            <button id="fromSubmit" class="radius2" th:onclick="'javascript:addprogram();'">提交</button>
            <input type="reset" class="reset radius2" value="清空"/>
        </p>
    </form>
    <form th:if="${type} eq 'edit'" class="stdform stdform2" action="/EditCategory" method="post" id="editForms">
        <p>
            <label>添加方式:</label>
            <span class="field" >
                <input name="Fruit" type="radio" value="" />单条添加
                <input name="Fruit" type="radio" value="" />批量添加
            </span>
        </p>

        <p>
            <label>上级栏目：</label>
            <span class="field" >
             <select th:if="${type} eq 'edit'" name="parentid" id="parentid" style="width:500px;padding: 8px;">
                 <option th:each="c:${categorylist}" th:value="${c.parentid} " th:text="${c.name} "></option>
             </select>
            </span>
        </p>
        <p>
            <label>栏目名称：</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" id="name" th:value="${category.name}" type="text" name="catname" class="mediuminput langmu"/>
                  <input th:if="${type} eq 'edit'" id="catid" style="display: none" type="text" name="catid" th:value="${category.catid}"  class="mediuminput"/>
            </span>
        </p>
        <p>
            <label>英文目录：</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" id="catdir"  th:value="${category.catdir}"type="text" name="catdir" class="mediuminput mulu"/>
            </span>
        </p>
        <p>
            <label>栏目图片：</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" id="image"th:text="${category.image}"type="text" name="image" class="mediuminput"/>
            </span>
        </p>
        <p>
            <label>栏目位置Code</label>
            <span class="field" id="catlocation"></span>
        </p>
        <p>
            <label>描述：</label>
            <span class="field">
               <textarea name="description" th:if="${type} eq 'edit'"  th:value="${category.description}"maxlength="255" id="description" style="width: 134px; height: 48px; margin: 0px;"></textarea>
            </span>
        </p>
        <p class="stdformbutton">
            <button id="editfromSubmit" class="radius2">提交</button>
            <input type="reset" class="reset radius2" value="清空"/>
        </p>
    </form>

    <script type="application/javascript">
        $("#fromSubmit").click(function () {
            var lanmu=$(".langmu").val();
            if(lanmu==""){
            layer.msg("请输入栏目名称！");
                return false;
            }
            if(lanmu.length>16){
                layer.msg("栏目名称过长！");
                return false;
            }
            var mulu=$(".mulu").val();
            if(mulu==""){
                layer.msg("请输入英文目录！");
                return false;
            }


            $("#forms").submit();
        });
        $("#editfromSubmit").click(function () {
            var lanmu=$(".langmu").val();
            if(lanmu==""){
                layer.msg("请输入栏目名称！");
                return false;
            }
            if(lanmu.length>16){
                layer.msg("栏目名称过长！");
                return false;
            }
            var mulu=$(".mulu").val();
            if(mulu==""){
                layer.msg("请输入英文目录！");
                return false;
            }

            $("#editForms").submit();
        });

        $.ajax({
            url:"/CateLocationList",
            dataType:"json",
            type:"get",
            success:function (data) {
                console.log(data);
                var html = "";
                html+="<select name='cat_code' id='cat_code'><option value=''>请选择栏目位置</option>";
                for(var i in data){
                    html+= "<option value='"+data[i].cat_code+"'>"+data[i].name+"</option>";
                }
                html+="</select>";
                $("#catlocation").html(html);
            }
        });
    </script>
</div><!-- centercontent -->
</body>
</html>