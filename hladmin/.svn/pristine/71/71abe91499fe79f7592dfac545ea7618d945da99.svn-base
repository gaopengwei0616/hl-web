<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yida.mapper.AttachmentMapper">
    <resultMap id="AttachmentMap" type="com.yida.entity.Attachment">
       <id column="aid" property="aid"/>
        <result column="module" property="module"/>
        <result column="catid" property="catid"/>
        <result column="filename" property="filename"/>
        <result column="filepath" property="filepath"/>
        <result column="filesize" property="filesize" />
        <result column="fileext" property="fileext"/>
        <result column="isimag" property="isimag"/>
        <result column="isthumb" property="isthumb"/>
        <result column="downloads" property="downloads"/>
        <result column="userid" property="userid"/>
        <result column="uploadtime" property="uploadtime"/>
        <result column="uploadip" property="uploadip"/>
        <result column="status" property="status"/>
        <result column="authcode" property="authcode"/>
        <result column="siteid" property="siteid"/>
    </resultMap>
    
    <select id="selectAttachmentsBypaging" resultMap="AttachmentMap" >
        select aid,module,catid,filename,filepath,filesize,fileext,
              isimage,isthumb,downloads,userid,FROM_UNIXTIME(uploadtime,'%Y-%m-%d %H:%i:%s' )as uploadtime,
              uploadip,status,authcode,siteid
      from v9_attachment
      where status=1
      order by uploadtime DESC
    </select>
    <select id="AttachmentCount" resultType="int" >
        select count(*)  from v9_attachment where status=1
    </select>
    <update id="updateByaId"  >
       update v9_attachment
       <set>
           status =#{status}
       </set>
        where aid=#{aid}
    </update>

</mapper>