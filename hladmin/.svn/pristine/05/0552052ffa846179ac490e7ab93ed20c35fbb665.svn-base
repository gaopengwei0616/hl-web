<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>控制台页面</title>

    <link rel="stylesheet" href="css/style.default.css" type="text/css"/>
    <script type="text/javascript" src="js/plugins/jquery-1.7.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>

    <!--[if lte IE 8]>
    <script language="javascript" type="text/javascript" src="js/plugins/excanvas.min.js"></script><![endif]-->
    <!--[if IE 9]>
    <link rel="stylesheet" media="screen" href="css/style.ie9.css"/>
    <![endif]-->
    <!--[if IE 8]>
    <link rel="stylesheet" media="screen" href="css/style.ie8.css"/>
    <![endif]-->
    <!--[if lt IE 9]>
    <script src="js/plugins/css3-mediaqueries.js"></script>
    <![endif]-->
</head>
<body>

<div class="pageheader">
    <ul class="breadcrumbs">
        <li><a href="">内容</a></li>
        <li><a href="">内容相关设置</a></li>
        <li><a href="">推荐位管理</a></li>
        <li>添加推荐位</li>
        <li>修改推荐位</li>
    </ul>
</div><!--pageheader-->

<div id="contentwrapper" class="contentwrapper">
    <div style="margin-bottom: 5px">
        <input type="button" value="添加推荐位" class="stdbtn btn_black"
               onclick="changUrl('/addEditPosition?type=add');">
        <input type="button" value="推荐位管理" class="stdbtn btn_black"
               onclick="changUrl('/PositionManagerList');">
    </div>
    <form th:if="${type} eq 'add'" class="stdform stdform2" action="/insertPosition" method="post" id="forms">
        <p>
            <label>推荐位名称:</label>
            <span class="field">
                <input th:if="${type} eq 'add'" type="text" name="name"  class="mediuminput"/>
            </span>
        </p>

        <p>
            <label>所属模型：</label>
            <span class="field">
                <select name="selection" id="add_module_select">
                    <option value="">请选择</option>
                    <option value="content">文章模型</option>
                    <option value="download">下载模型</option>
                    <option value="picture">图片模型</option>
                </select>
            </span>
        </p>
        <p>
            <label>所属栏目：</label>
            <span class="field">
                <select name="selection" id="catid" name="catid">
                </select>
            </span>
        </p>
        <p>
            <label>排序：</label>
            <span class="field">
                <input th:if="${type} eq 'add'" type="text" name="listorder" class="smallinput"/>
            </span>
        </p>

        <p>
            <label>最大保存条数：</label>
            <span class="field">
                <input th:if="${type} eq 'add'" type="text" name="maxnum" class="mediuminput"/>
            </span>
        </p>
        <p>
            <label>扩展字段配置：</label>
            <span class="field">
                <input th:if="${type} eq 'add'" type="text" name="extention" class="mediuminput"/>
            </span>
        </p>


        <p class="stdformbutton">
            <button id="fromSubmit" class="radius2">提交</button>
            <input type="reset" class="reset radius2" value="清空"/>
        </p>
    </form>
    <form th:if="${type} eq 'edit'" class="stdform stdform2" action="/updatePosition" method="post" id="editForms">
        <input th:if="${type} eq 'edit'" type="hidden" name="posid"  class="mediuminput" th:value="${position.posid}"/>
        <p>
            <label>推荐位名称:</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" type="text" name="name"  class="mediuminput" th:value="${position.name}"/>
            </span>
        </p>

        <p>
            <label>所属模型：</label>
            <span class="field">
                <select name="selection" id="edit_module_select" th:value="${position.modelid}">
                    <option value="">请选择</option>
                    <option value="content">文章模型</option>
                    <option value="download">下载模型</option>
                    <option value="picture">图片模型</option>
                </select>
            </span>
        </p>
        <p>
            <label>所属栏目：</label>
            <span class="field">
                <input  type="hidden" name="edit_hidden_catid" th:value="${position.catid}"/>
                <select name="selection" id="catid" name="catid">
                </select>
            </span>
        </p>
        <p>
            <label>排序：</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" type="text" name="listorder" class="smallinput" th:value="${position.listorder}"/>
            </span>
        </p>

        <p>
            <label>最大保存条数：</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" type="text" name="maxnum" class="mediuminput" th:value="${position.maxnum}"/>
            </span>
        </p>
        <p>
            <label>扩展字段配置：</label>
            <span class="field">
                <input th:if="${type} eq 'edit'" type="text" name="extention" class="mediuminput" th:value="${position.extention}"/>
            </span>
        </p>


        <p class="stdformbutton">
            <button id="editfromSubmit" class="radius2">提交</button>
            <input type="reset" class="reset radius2" value="清空"/>
        </p>
    </form>

    <script type="text/javascript">
        $("#fromSubmit").click(function () {
            $("#forms").submit();
        });
        $("#editfromSubmit").click(function () {
            $("#editForms").submit();
        });

        $("#add_module_select").change(function () {
           var value = $(this).val();
           $.ajax({
               url:"/selectCategoryByModule?value="+value,
               dataType:"json",
               type:"get",
               success:function (data) {
                   if(data==""||data==null){
                       $("#catid").empty();
                   }
                  var html = "";
                  for(var i in data){
                      html+="<option value="+data[i].catid+">"+data[i].name+"</option>";
                  }
                  $("#catid").html(html);
               }
           })
        });
        $("#edit_module_select").change(function () {
            var value = $(this).val();
            $.ajax({
                url:"/selectCategoryByModule?value="+value,
                dataType:"json",
                type:"get",
                success:function (data) {
                    if(data==""||data==null){
                        $("#catid").empty();
                    }
                    var html = "";
                    for(var i in data){
                        html+="<option value="+data[i].catid+">"+data[i].name+"</option>";
                    }
                    $("#catid").html(html);
                    var edit_value= $("#edit_hidden_catid").val();
                    $("#catid").val(edit_value);
                }

            })
        });
    </script>
</div><!-- centercontent -->
</body>
</html>